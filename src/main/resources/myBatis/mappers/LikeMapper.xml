<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
  <mapper namespace="LikeMapper">
  
  <insert id="setWrtie" parameterType="LikeVO">
  	<selectKey keyProperty="lnum" order="BEFORE" resultType="Integer">
  		select t_like_seq.nextval from dual
	  </selectKey>
	  insert into t_like values(
	 	 #{lnum}, #{num}, #{id}, 1
	  )
  </insert>
  
  <!-- 좋아요 -->
  <update id="like_check" parameterType="java.util.Map">
    UPDATE t_like
    SET like_check = like_check + 1 
    WHERE id=#{id} AND num=#{num}
  </update>
  
  <!-- 좋아요 취소 -->
  <update id="like_check_cancel" parameterType="java.util.Map">
    UPDATE t_like
    SET like_check =0
    WHERE id=#{id} AND num=#{num}
  </update>
  
  <select id="getSelect" parameterType="Integer">
  	select like_check from t_like where lnum=#{lnum}
  </select>

  
</mapper>  